<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Metadata and Title -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Redhunllef Livestream</title>
  
  <!-- Favicon (Logo) -->
  <link rel="icon" href="/static/redlogo.png" type="image/png" />
  
  <!-- Google Fonts: Roboto -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />

  <!-- ========================================================= -->
  <!-- CSS Styles -->
  <!-- ========================================================= -->
  <style>
    /* Reset and Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #3a3a3a;
      color: #f0f0f0;
      overflow-x: hidden;
    }

    /* ============================================== */
    /* Starry Background Styles */
    /* ============================================== */
    #stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      z-index: -1;
      overflow: hidden;
    }
    .stars-overlay {
      position: absolute;
      width: 100%;
      height: 100%;
    }
    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: #fff;
      border-radius: 50%;
      opacity: 0.8;
    }

    /* ============================================== */
    /* Main Container */
    /* ============================================== */
    .container {
      position: relative;
      padding: 20px;
      text-align: center;
    }

    /* ============================================== */
    /* Header and Logo */
    /* ============================================== */
    header img {
      width: 225px;
      height: auto;
      animation: bounce 0.6s infinite ease-in-out;
      margin-bottom: 20px;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }

    /* ============================================== */
    /* Sponsor Section */
    /* ============================================== */
    #sponsor-message p {
      font-size: 1.2rem;
      margin-bottom: 20px;
    }
    .button-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-bottom: 40px;
    }
    .button {
      padding: 15px 30px;
      background-color: #ff2d2d;
      color: #fff;
      text-decoration: none;
      border-radius: 5px;
      font-size: 1.2rem;
      transition: background-color 0.3s ease;
    }
    .button:hover {
      background-color: #cc2424;
    }

    /* ============================================== */
    /* Wager Race Section */
    /* ============================================== */
    .wager-container {
      margin-top: 40px;
    }
    .wager-title {
      font-size: 2rem;
      margin-bottom: 20px;
    }
    /* Podium for Top 3 */
    .podium {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 40px;
      margin-bottom: 40px;
    }
    .podium .position {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      padding: 10px;
      border-radius: 10px;
      background-color: #444;
      color: #fff;
    }
    .podium .position h3 {
      margin-bottom: 5px;
      font-size: 1.3rem;
    }
    .podium .position p {
      font-size: 1.1rem;
    }
    /* Specific styles for podium placements */
    .podium .first {
      background-color: gold;
      width: 220px;
      height: 270px;
      box-shadow: 0 0 20px rgba(255,215,0,0.7);
    }
    .podium .second {
      background-color: silver;
      width: 180px;
      height: 220px;
      box-shadow: 0 0 15px rgba(192,192,192,0.7);
    }
    .podium .third {
      background-color: #cd7f32;
      width: 180px;
      height: 200px;
      box-shadow: 0 0 15px rgba(205,127,50,0.7);
    }
    /* Other Standings Grid (Positions 4 to 11) */
    .other-standings {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
    }
    .standing {
      background-color: #444;
      padding: 10px;
      border-radius: 10px;
      text-align: center;
      font-size: 1rem;
    }
    .standing h3 {
      font-size: 1.2rem;
      margin-bottom: 5px;
      color: #ff2d2d;
    }
    
    /* ============================================== */
    /* Footer */
    /* ============================================== */
    footer {
      margin-top: 40px;
      font-size: 0.9rem;
      color: #888;
    }
    footer a {
      color: #ff2d2d;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
    
    /* ============================================== */
    /* Responsive Styles */
    /* ============================================== */
    @media (max-width: 768px) {
      header img {
        width: 180px;
      }
      .button {
        font-size: 1rem;
        padding: 12px 24px;
      }
      .wager-title {
        font-size: 1.5rem;
      }
      .podium .first, .podium .second, .podium .third {
        width: 150px;
      }
    }
  </style>
</head>
<body>
  <!-- ========================================================= -->
  <!-- Starry Background -->
  <!-- ========================================================= -->
  <div id="stars">
    <div class="stars-overlay"></div>
  </div>
  
  <!-- ========================================================= -->
  <!-- Main Container -->
  <!-- ========================================================= -->
  <div class="container">
    <!-- Header Section: Clickable Logo -->
    <header>
      <a href="https://kick.com/redhunllef">
        <img src="/static/redlogo.png" alt="Redhunllef Logo" />
      </a>
    </header>
    
    <!-- Sponsor Message -->
    <div id="sponsor-message">
      <p>Support Redhunllef by visiting his sponsors below.</p>
    </div>
    
    <!-- Sponsor Buttons -->
    <div class="button-container">
      <a href="https://shuffle.com/?r=Red" class="button">Shuffle.com</a>
      <a href="https://chicken.gg/r/Red" class="button">Chicken.gg</a>
      <a href="https://runestake.com/r/red" class="button">Runestake.com</a>
      <a href="https://csgostake.com/r/red" class="button">CSGOStake.com</a>
    </div>
    
    <!-- Wager Race Section -->
    <div class="wager-container">
      <h2 class="wager-title">Top 11 Wagers</h2>
      <!-- Podium for Top 3 Wagerers -->
      <div class="podium" id="top-3-standings">
        <!-- Dynamic content for positions 1-3 will be inserted here -->
      </div>
      <!-- Grid for Standings 4 to 11 -->
      <div class="other-standings" id="wager-standings">
        <!-- Dynamic content for positions 4-11 will be inserted here -->
      </div>
    </div>
    
    <!-- Footer -->
    <footer>
      <p>&copy; 2024 Redhunllef Livestream. All Rights Reserved.</p>
      <p>Built by <a href="https://kick.com/gingrsnaps" target="_blank">GingrSnaps</a></p>
    </footer>
  </div>
  
  <!-- ========================================================= -->
  <!-- JavaScript: Starry Background Effect -->
  <!-- ========================================================= -->
  <script>
    (function() {
      const starsContainer = document.querySelector('.stars-overlay');
      const starsCount = 350;
      for (let i = 0; i < starsCount; i++) {
        const star = document.createElement('div');
        star.classList.add('star');
        star.style.top = Math.random() * 100 + '%';
        star.style.left = Math.random() * 100 + '%';
        star.style.opacity = Math.random();
        star.style.transform = 'scale(' + (1 + Math.random() * 0.5) + ')';
        starsContainer.appendChild(star);
      }
      
      // Desktop: Optional parallax effect with mouse movement
      if (window.innerWidth > 768) {
        window.addEventListener('mousemove', (e) => {
          const { clientX, clientY } = e;
          starsContainer.style.transform = `translate(${clientX / 100}px, ${clientY / 100}px)`;
        });
      }
    })();
  </script>
  
  <!-- ========================================================= -->
  <!-- JavaScript: Update Wager Race Standings -->
  <!-- ========================================================= -->
  <script>
    // Placeholder data (used if API data is unavailable)
    const placeholderData = [
      { rank: 1, name: "Player1", wager: "$10,000.00" },
      { rank: 2, name: "Player2", wager: "$8,500.00" },
      { rank: 3, name: "Player3", wager: "$7,500.00" },
      { rank: 4, name: "Player4", wager: "$7,000.00" },
      { rank: 5, name: "Player5", wager: "$6,500.00" },
      { rank: 6, name: "Player6", wager: "$6,000.00" },
      { rank: 7, name: "Player7", wager: "$5,500.00" },
      { rank: 8, name: "Player8", wager: "$5,000.00" },
      { rank: 9, name: "Player9", wager: "$4,500.00" },
      { rank: 10, name: "Player10", wager: "$4,000.00" },
      { rank: 11, name: "Player11", wager: "$3,500.00" }
    ];
    
    // Function to update the standings from the API data (fetched at /data)
    function updateWagerRace() {
      fetch('/data')
        .then(response => response.json())
        .then(data => {
          console.log(`[${new Date().toISOString()}] INFO: Fetched data:`, data);
          // If API data returns an error, use placeholder data
          if (data.error || !Array.isArray(data)) {
            console.warn(`[${new Date().toISOString()}] WARNING: Using placeholder data due to API error.`);
            populateWithData(placeholderData);
          } else {
            // Expecting data to be an array of objects with properties: rank, name, wager
            populateWithData(data);
          }
        })
        .catch(error => {
          console.error(`[${new Date().toISOString()}] ERROR: Failed to fetch data:`, error);
          populateWithData(placeholderData);
        });
    }
    
    // Function that populates the podium and standings sections with data
    function populateWithData(data) {
      // Separate top 3 and others
      const top3 = data.slice(0, 3);
      const others = data.slice(3);
      
      // Populate Podium (for top 3)
      const top3Container = document.getElementById('top-3-standings');
      top3Container.innerHTML = `
        <div class="position second">
          <h3>2nd: ${top3[1].name}</h3>
          <p>${top3[1].wager}</p>
        </div>
        <div class="position first">
          <h3>1st: ${top3[0].name}</h3>
          <p>${top3[0].wager}</p>
        </div>
        <div class="position third">
          <h3>3rd: ${top3[2].name}</h3>
          <p>${top3[2].wager}</p>
        </div>
      `;
      
      // Populate the other standings (positions 4 to 11)
      const othersContainer = document.getElementById('wager-standings');
      othersContainer.innerHTML = "";
      others.forEach((user, index) => {
        const div = document.createElement('div');
        div.classList.add('standing');
        div.innerHTML = `<h3>${index + 4}th: ${user.name}</h3><p>${user.wager}</p>`;
        othersContainer.appendChild(div);
      });
    }
    
    // Update the wager race standings every 15 minutes
    setInterval(updateWagerRace, 15 * 60 * 1000);
    // Initial update when the page loads
    window.onload = updateWagerRace;
  </script>
</body>
</html>
